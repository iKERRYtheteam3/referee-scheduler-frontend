{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Dashboard(_ref){let{token,onLogout}=_ref;const[games,setGames]=useState([]);const[userRole,setUserRole]=useState('');const[newGame,setNewGame]=useState({date:'',time:'',location:'',teams:'',level:'',refsNeeded:1});useEffect(()=>{fetch('https://referee-scheduler-backend.onrender.com/api/games',{headers:{'x-auth-token':token}}).then(res=>res.json()).then(data=>setGames(data));fetch('https://referee-scheduler-backend.onrender.com/api/auth/me',{headers:{'x-auth-token':token}}).then(res=>res.json()).then(data=>setUserRole(data.role));},[token]);const handleSignup=async id=>{const res=await fetch(`https://referee-scheduler-backend.onrender.com/api/games/${id}/signup`,{method:'POST',headers:{'x-auth-token':token,'Content-Type':'application/json'}});const data=await res.json();if(res.ok){alert('Signed up successfully!');setGames(games.map(g=>g._id===id?data:g));}else{alert(data.msg||'Error signing up');}};const handleGameChange=e=>{setNewGame({...newGame,[e.target.name]:e.target.value});};const handleGameSubmit=async e=>{e.preventDefault();const res=await fetch('https://referee-scheduler-backend.onrender.com/api/games',{method:'POST',headers:{'x-auth-token':token,'Content-Type':'application/json'},body:JSON.stringify(newGame)});const data=await res.json();if(res.ok){alert('Game created!');setGames([...games,data]);setNewGame({date:'',time:'',location:'',teams:'',level:'',refsNeeded:1});}else{alert(data.msg||'Error creating game');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,children:\"Logout\"}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"h2\",{children:\"Available Games\"}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsxs(\"ul\",{children:[\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",games.map(game=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",game.date,\" \",game.time,\" - \",game.teams,\" @ \",game.location,\" [\",game.assignedRefs.length,\"/\",game.refsNeeded,\"] \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",userRole==='referee'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSignup(game._id),children:\"Sign Up\"}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]},game._id)),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",userRole==='admin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"h3\",{children:\"Create New Game\"}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleGameSubmit,children:[\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"input\",{name:\"date\",placeholder:\"Date\",value:newGame.date,onChange:handleGameChange,required:true}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"input\",{name:\"time\",placeholder:\"Time\",value:newGame.time,onChange:handleGameChange,required:true}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"input\",{name:\"location\",placeholder:\"Location\",value:newGame.location,onChange:handleGameChange,required:true}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"input\",{name:\"teams\",placeholder:\"Teams\",value:newGame.teams,onChange:handleGameChange,required:true}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"input\",{name:\"level\",placeholder:\"Level\",value:newGame.level,onChange:handleGameChange,required:true}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"input\",{name:\"refsNeeded\",type:\"number\",placeholder:\"Refs Needed\",value:newGame.refsNeeded,onChange:handleGameChange,required:true}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post Game\"}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]}),\"\\xA0\\xA0\\xA0\\xA0\"]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_ref","token","onLogout","games","setGames","userRole","setUserRole","newGame","setNewGame","date","time","location","teams","level","refsNeeded","fetch","headers","then","res","json","data","role","handleSignup","id","method","ok","alert","map","g","_id","msg","handleGameChange","e","target","name","value","handleGameSubmit","preventDefault","body","JSON","stringify","className","children","onClick","game","assignedRefs","length","onSubmit","placeholder","onChange","required","type"],"sources":["/Users/angelicaallen/Downloads/referee_scheduler_frontend_fixed_app/src/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nfunction Dashboard({ token, onLogout }) {\n  const [games, setGames] = useState([]);\n  const [userRole, setUserRole] = useState('');\n  const [newGame, setNewGame] = useState({\n    date: '', time: '', location: '', teams: '', level: '', refsNeeded: 1\n  });\n\n  useEffect(() => {\n    fetch('https://referee-scheduler-backend.onrender.com/api/games', {\n      headers: { 'x-auth-token': token },\n    })\n      .then(res => res.json())\n      .then(data => setGames(data));\n\n    fetch('https://referee-scheduler-backend.onrender.com/api/auth/me', {\n      headers: { 'x-auth-token': token }\n    })\n      .then(res => res.json())\n      .then(data => setUserRole(data.role));\n  }, [token]);\n\n  const handleSignup = async (id) => {\n    const res = await fetch(`https://referee-scheduler-backend.onrender.com/api/games/${id}/signup`, {\n      method: 'POST',\n      headers: {\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      }\n    });\n    const data = await res.json();\n    if (res.ok) {\n      alert('Signed up successfully!');\n      setGames(games.map(g => g._id === id ? data : g));\n    } else {\n      alert(data.msg || 'Error signing up');\n    }\n  };\n\n  const handleGameChange = (e) => {\n    setNewGame({ ...newGame, [e.target.name]: e.target.value });\n  };\n\n  const handleGameSubmit = async (e) => {\n    e.preventDefault();\n    const res = await fetch('https://referee-scheduler-backend.onrender.com/api/games', {\n      method: 'POST',\n      headers: {\n        'x-auth-token': token,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(newGame)\n    });\n    const data = await res.json();\n    if (res.ok) {\n      alert('Game created!');\n      setGames([...games, data]);\n      setNewGame({ date: '', time: '', location: '', teams: '', level: '', refsNeeded: 1 });\n    } else {\n      alert(data.msg || 'Error creating game');\n    }\n  };\n\n  return (\n    <div className=\"dashboard\">\n      <button onClick={onLogout}>Logout</button>\n      <h2>Available Games</h2>\n      <ul>\n        {games.map(game => (\n          <li key={game._id}>\n            {game.date} {game.time} - {game.teams} @ {game.location} [{game.assignedRefs.length}/{game.refsNeeded}]\n            {userRole === 'referee' && <button onClick={() => handleSignup(game._id)}>Sign Up</button>}\n          </li>\n        ))}\n      </ul>\n\n      {userRole === 'admin' && (\n        <>\n          <h3>Create New Game</h3>\n          <form onSubmit={handleGameSubmit}>\n            <input name=\"date\" placeholder=\"Date\" value={newGame.date} onChange={handleGameChange} required />\n            <input name=\"time\" placeholder=\"Time\" value={newGame.time} onChange={handleGameChange} required />\n            <input name=\"location\" placeholder=\"Location\" value={newGame.location} onChange={handleGameChange} required />\n            <input name=\"teams\" placeholder=\"Teams\" value={newGame.teams} onChange={handleGameChange} required />\n            <input name=\"level\" placeholder=\"Level\" value={newGame.level} onChange={handleGameChange} required />\n            <input name=\"refsNeeded\" type=\"number\" placeholder=\"Refs Needed\" value={newGame.refsNeeded} onChange={handleGameChange} required />\n            <button type=\"submit\">Post Game</button>\n          </form>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}